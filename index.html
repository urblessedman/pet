<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
  <title>ë°˜ë ¤ê²¬ ë§¤ì¹­ ì‹œìŠ¤í…œ | ë‚˜ì—ê²Œ ë”± ë§ëŠ” ê°•ì•„ì§€ ì°¾ê¸° í…ŒìŠ¤íŠ¸</title>
  
  <meta name="description" content="ë‚˜ì˜ ì„±ê²©, ê±°ì£¼ í™˜ê²½, í™œë™ëŸ‰ì„ ë¶„ì„í•˜ì—¬ ê°€ì¥ ì í•©í•œ ê²¬ì¢…ì„ ì¶”ì²œí•´ì£¼ëŠ” AI ë°˜ë ¤ê²¬ ë§¤ì¹­ í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤.">
  <meta name="keywords" content="ê°•ì•„ì§€ MBTI, ë°˜ë ¤ê²¬ í…ŒìŠ¤íŠ¸, ê²¬ì¢… ì¶”ì²œ, ì•„íŒŒíŠ¸ ê°•ì•„ì§€, í« ë³´í—˜">
  
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5789121095939793"
     crossorigin="anonymous"></script>

  <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/1076/1076928.png" />
  
  <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  
  <script src="ads.js" defer></script>

  <style>
    /* CSS Reset */
    :root { --bg-color: #F8F9FA; --primary-color: #6C5CE7; --secondary-color: #00CEC9; --accent-color: #FF7675; --text-color: #2D3436; --white: #ffffff; --shadow: 0 10px 30px rgba(108, 92, 231, 0.15); --radius: 20px; }
    * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
    
    html, body { height: 100%; margin: 0; padding: 0; }
    body {
      font-family: 'Noto Sans KR', sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
      width: 100%; 
      overflow-x: hidden;
    }

    #app-container {
      width: 100%; max-width: 500px; margin: 0 auto; 
      background: var(--white); 
      box-shadow: var(--shadow);
      position: relative;
      min-height: 100%;
      display: flex; flex-direction: column;
    }

    header { padding: 18px; text-align: center; font-family: 'Jua', sans-serif; color: var(--text-color); font-size: 1.2rem; border-bottom: 1px solid #eee; background: rgba(255,255,255,0.95); position: sticky; top: 0; z-index: 100; backdrop-filter: blur(5px); flex-shrink: 0; }
    header i { color: var(--primary-color); margin-right: 5px; }

    /* Main Content */
    main { 
      flex: 1 0 auto; 
      padding: 20px; 
      display: flex; 
      flex-direction: column; 
      align-items: center; 
      justify-content: center; 
      text-align: center;
      min-height: 100vh; 
    }

    .screen { display: none; width: 100%; animation: fadeIn 0.5s ease; padding-bottom: 40px; }
    .screen.active { display: flex; flex-direction: column; align-items: center; width: 100%; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    /* --- è§†è§‰å¡«å……å…ƒç´  (å¡«è¡¥ç©ºç™½) --- */
    .q-visual-icon {
      font-size: 4rem;
      margin: 10px 0 20px 0;
      animation: bounce 2s infinite;
    }
    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
      40% {transform: translateY(-10px);}
      60% {transform: translateY(-5px);}
    }

    /* Components */
    .hero-img { width: 100%; height: 260px; object-fit: cover; border-radius: var(--radius); margin-bottom: 25px; background-color: #eee; }
    h1 { font-family: 'Jua', sans-serif; font-size: 2.1rem; margin-bottom: 10px; line-height: 1.3; color: #111; }
    h1 span { color: var(--primary-color); }
    .subtitle { color: #636E72; font-size: 1rem; margin-bottom: 30px; }
    
    .btn-primary { background: linear-gradient(135deg, var(--primary-color), #a29bfe); color: white; border: none; padding: 18px 0; width: 100%; font-size: 1.2rem; border-radius: var(--radius); font-weight: 700; font-family: 'Jua'; cursor: pointer; box-shadow: 0 8px 20px rgba(108, 92, 231, 0.3); transition: transform 0.1s; }
    .btn-primary:active { transform: scale(0.98); }

    /* Question Styles */
    .progress-wrapper { width: 100%; margin-bottom: 20px; }
    .progress-bar { width: 100%; height: 10px; background: #E5E7EB; border-radius: 10px; margin-bottom: 10px; position: relative; overflow: hidden; }
    .progress-fill { height: 100%; background: var(--primary-color); width: 0%; transition: width 0.3s; border-radius: 10px; }
    .step-text { text-align: right; font-size: 0.85rem; color: #888; font-weight: bold; }

    .question-box h2 { font-family: 'Jua', sans-serif; font-size: 1.6rem; margin-bottom: 30px; line-height: 1.4; color: #2D3436; word-break: keep-all; }
    
    .option-btn { width: 100%; padding: 20px; margin-bottom: 15px; border: 2px solid #F0F2F5; border-radius: 18px; background: white; font-size: 1.05rem; font-weight: 500; color: #444; cursor: pointer; text-align: left; display: flex; justify-content: space-between; align-items: center; transition: all 0.2s; }
    .option-btn:hover { border-color: var(--primary-color); background-color: #F8F7FF; color: var(--primary-color); transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.05); }

    /* Result & Chart */
    .result-img { width: 220px; height: 220px; border-radius: 50%; object-fit: cover; border: 8px solid white; box-shadow: 0 15px 35px rgba(0,0,0,0.15); background-color: #f0f0f0; margin-bottom: 20px; }
    .match-label { background: var(--secondary-color); color: white; padding: 5px 10px; border-radius: 10px; font-size: 0.8rem; font-weight: bold; margin-bottom: 10px; display: inline-block; }
    
    .radar-box { background: #F8F9FA; border-radius: 15px; padding: 20px; margin: 0 0 25px 0; width: 100%; }
    .radar-row { display: flex; align-items: center; margin-bottom: 10px; }
    .radar-label { width: 70px; text-align: left; font-size: 0.85rem; font-weight: bold; color: #555; }
    .radar-bar-bg { flex: 1; height: 10px; background: #e0e0e0; border-radius: 5px; overflow: hidden; }
    .radar-bar-fill { height: 100%; width: 0%; transition: width 1.5s ease-out; border-radius: 5px; }
    .bar-1 { background: var(--primary-color); } .bar-2 { background: var(--secondary-color); } .bar-3 { background: var(--accent-color); }

    .loading-container { height: 60vh; display: flex; flex-direction: column; justify-content: center; align-items: center; }
    .dna-spinner { font-size: 3rem; color: var(--primary-color); animation: spin 2s infinite linear; margin-bottom: 20px; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

    .insurance-alert { background: #FFF5F5; border: 1px solid #FEB2B2; border-radius: var(--radius); padding: 20px; width: 100%; text-align: left; margin-bottom: 20px; }
    .ins-btn { display: block; width: 100%; background: #C53030; color: white; text-align: center; padding: 12px; border-radius: 10px; font-weight: bold; text-decoration: none; margin-top: 10px; }
    .desc-box { background: #fff; padding: 20px; border-radius: 15px; border: 2px solid #f1f2f6; width: 100%; text-align: left; margin-bottom: 20px; line-height: 1.6; color: #555; }
    
    .btn-share { background: #FEE500; color: #3c1e1e; border: none; padding: 15px; width: 100%; border-radius: 12px; font-weight: bold; cursor: pointer; font-size: 1rem; }
    .btn-retry { background: white; border: 2px solid #eee; padding: 15px; width: 100%; border-radius: 12px; font-weight: bold; color: #666; cursor: pointer; margin-top: 10px;}

    /* å¹¿å‘Šä½é«˜åº¦é¢„ç•™ - é˜²æ­¢å¸ƒå±€è·³åŠ¨ */
    .ad-area { width: 100%; min-height: 280px; background: #f8f9fa; margin-top: 30px; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: #ccc; font-size: 0.8rem; overflow: hidden; border: 2px dashed #eee; }
    .ad-label { position: absolute; top: 5px; left: 10px; font-size: 0.7rem; color: #aaa; }

    footer { flex-shrink: 0; padding: 40px 20px; background: #2D3436; color: #b2bec3; text-align: center; font-size: 0.8rem; line-height: 1.8; }
    footer a { color: #dfe6e9; text-decoration: none; }
    footer .legal-links span { margin: 0 10px; cursor: pointer; text-decoration: underline; }

    .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center; }
    .modal-content { background: white; width: 90%; max-width: 400px; max-height: 80vh; padding: 20px; border-radius: 15px; overflow-y: auto; text-align: left; position: relative; }
    .modal-close { position: absolute; top: 15px; right: 15px; font-size: 1.5rem; cursor: pointer; color: #aaa; }
    .modal-title { font-weight: bold; font-size: 1.1rem; margin-bottom: 15px; color: var(--text-color); }
    .modal-text { font-size: 0.85rem; line-height: 1.6; color: #555; white-space: pre-line; }
  </style>
</head>
<body>
  
  <div id="app-container">
    <header><i class="fas fa-paw"></i> ëŒ•ëŒ•ì´ ì—°êµ¬ì†Œ</header>
    
    <main>
      <div id="screen-start" class="screen active">
        <img class="hero-img" src="https://images.unsplash.com/photo-1518717758536-85ae29035b6d?w=600" alt="main"/>
        <h1>ë‚˜ì˜ ìš´ëª…ì <br/><span>ë°˜ë ¤ê²¬ ì°¾ê¸°</span></h1>
        <p class="subtitle">ì„±ê²©(MBTI)ê³¼ í˜„ì‹¤ ì¡°ê±´ì„ ê³ ë ¤í•œ<br/>AI ì •ë°€ ë¶„ì„ ì‹œìŠ¤í…œ</p>
        <button class="btn-primary" onclick="startTest()">ë§¤ì¹­ ì‹œì‘í•˜ê¸°</button>
        
        <div id="ad-container-main" class="ad-area">
          <span class="ad-label">Sponsored</span>
          AD LOADING...
        </div>
      </div>

      <div id="screen-question" class="screen">
        <div class="progress-wrapper">
          <div class="step-text">Step <span id="q-idx">1</span>/12</div>
          <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>
        </div>
        
        <div id="q-icon" class="q-visual-icon">ğŸ </div>

        <h2 id="q-text" style="font-family:'Jua'; font-size:1.5rem; margin-bottom:30px;">ì§ˆë¬¸ ë‚´ìš©</h2>
        <button class="option-btn" onclick="nextQuestion(0)"><span id="ans-a">A</span> <i class="far fa-check-circle"></i></button>
        <button class="option-btn" onclick="nextQuestion(1)"><span id="ans-b">B</span> <i class="far fa-check-circle"></i></button>

        <div id="ad-container-question" class="ad-area" style="min-height: 250px; height: 250px;">
          <span class="ad-label">Sponsored</span>
          AD LOADING...
        </div>
      </div>

      <div id="screen-loading" class="screen">
        <div class="loading-container">
          <i class="fas fa-dna dna-spinner"></i>
          <h2 id="load-msg" class="loading-text">ë¶„ì„ ì¤‘...</h2>
          <div id="ad-container-loading" class="ad-area">PREMIUM AD</div>
        </div>
      </div>

      <div id="screen-result" class="screen">
        <div class="score-badge"><i class="fas fa-heart"></i> ë§¤ì¹­ë¥  <span id="match-percent">97</span>%</div>
        <h1 id="res-name" style="font-family:'Jua'; font-size:2.2rem; color:var(--primary-color); margin-bottom:10px;">ê²¬ì¢… ì´ë¦„</h1>
        
        <img id="res-img" class="result-img" alt="ê²°ê³¼ ì´ë¯¸ì§€" />
        <div id="res-tag" class="match-label">#íƒœê·¸</div>

        <div class="radar-box">
          <div class="radar-row">
            <span class="radar-label">ì„±ê²© ì¼€ë¯¸</span>
            <div class="radar-bar-bg"><div class="radar-bar-fill bar-1" id="score-chem"></div></div>
          </div>
          <div class="radar-row">
            <span class="radar-label">í™˜ê²½ ì í•©</span>
            <div class="radar-bar-bg"><div class="radar-bar-fill bar-2" id="score-env"></div></div>
          </div>
          <div class="radar-row">
            <span class="radar-label">í™œë™ ì—ë„ˆì§€</span>
            <div class="radar-bar-bg"><div class="radar-bar-fill bar-3" id="score-energy"></div></div>
          </div>
        </div>

        <div class="desc-box">
          <span style="color:var(--primary-color); font-weight:bold;">ğŸ“ ë¶„ì„ ê²°ê³¼:</span><br/>
          <span id="res-desc">ì„¤ëª…</span>
        </div>

        <div class="insurance-alert">
          <div style="color:#C53030; font-weight:800; margin-bottom:10px;"><i class="fas fa-file-medical-alt"></i> ê±´ê°• ê´€ë¦¬ ì£¼ì˜ì‚¬í•­</div>
          <span id="res-health" style="font-size:0.9rem; color:#4A5568;">ì£¼ì˜ì‚¬í•­ ë‚´ìš©</span>
          <a href="https://smartkrinsurance.com" target="_blank" class="ins-btn" id="ins-btn-text">ë³´í—˜ë£Œ í™•ì¸ ></a>
        </div>

        <button class="btn-share" onclick="shareFinalResult()"><i class="fas fa-share-alt"></i> ê²°ê³¼ ê³µìœ í•˜ê¸°</button>
        <button class="btn-retry" onclick="location.reload()">ğŸ”„ ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸°</button>
        
        <div id="ad-container-result" class="ad-area">Footer AD</div>
      </div>
    </main>

    <footer>
      <div class="legal-links">
        <span onclick="openModal('terms')">ì´ìš©ì•½ê´€</span> | 
        <span onclick="openModal('privacy')">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</span>
      </div>
      <p>Copyright Â© 2025 Pet Match Lab. All rights reserved.</p>
      <a href="https://smartkrinsurance.com" class="family-site" target="_blank" style="color:#dfe6e9; text-decoration:none; display:block; margin-top:10px; font-weight:bold;">
        Operated by Smart KR Insurance <i class="fas fa-external-link-alt" style="font-size:0.8rem"></i>
      </a>
    </footer>
  </div>

  <div id="modal-overlay" class="modal-overlay" onclick="closeModal(event)">
    <div class="modal-content">
      <span class="modal-close" onclick="closeModal(null)">&times;</span>
      <div id="modal-title" class="modal-title">ì œëª©</div>
      <div id="modal-body" class="modal-text">ë‚´ìš©</div>
    </div>
  </div>

  <script>
    //<![CDATA[
    const dogs = [
      { name: "í•µì¸ì‹¸ ê³¨ë“  ë¦¬íŠ¸ë¦¬ë²„", img: "./images/golden.jpg", traits: [10, 8, 10], tag: "#ì²œì‚¬ê²¬", desc: "ì‚¬ëŒì„ ë„ˆë¬´ ì¢‹ì•„í•˜ëŠ” ë‹¹ì‹ ê³¼ ê¸ì •ì™• ë¦¬íŠ¸ë¦¬ë²„ëŠ” í™˜ìƒì˜ ì§ê¿ì…ë‹ˆë‹¤! ë‹¤ë§Œ í„¸ ë¹ ì§ê³¼ í™œë™ëŸ‰ì´ ë§ì•„ ë„“ì€ ê³µê°„ê³¼ ë¶€ì§€ëŸ°í•¨ì´ í•„ìš”í•´ìš”.", health: "ê³ ê´€ì ˆ ì´í˜•ì„±ì¦ ë° í”¼ë¶€ì§ˆí™˜ ì£¼ì˜" },
      { name: "ë˜‘ìŸì´ í† ì´ í‘¸ë“¤", img: "./images/poodle.jpeg", traits: [9, 3, 5], tag: "#ì§€ëŠ¥1ìœ„", desc: "ì„¬ì„¸í•˜ê³  ë˜‘ë˜‘í•œ ë‹¹ì‹ ì—ê²Œ ë”±! í„¸ ë¹ ì§ì´ ì ì–´ ì•„íŒŒíŠ¸ ìƒí™œì— ìµœì í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ëˆˆì¹˜ê°€ ë¹¨ë¼ êµê°í•˜ëŠ” ì¬ë¯¸ê°€ ìµœê³ !", health: "ìŠ¬ê°œê³¨ íƒˆêµ¬ ë° ì™¸ì´ì—¼ ì£¼ì˜" },
      { name: "ì‹œí¬í•œ ì‹œë°”ê²¬", img: "./images/shiba.jpeg", traits: [2, 5, 6], tag: "#ë°€ë‹¹ê³ ìˆ˜", desc: "ë…ë¦½ì ì¸ ë‹¹ì‹ ê³¼ ì˜ ë§ì•„ìš”. ì„œë¡œì˜ ì˜ì—­ì„ ì¡´ì¤‘í•˜ë©° ì¿¨í•œ ë™ê±°ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë‹¨, ì—„ì²­ë‚œ í„¸ ë¹ ì§ì€ ê°ì˜¤í•˜ì„¸ìš”!", health: "ì•„í† í”¼ í”¼ë¶€ì—¼ ë° ì•Œë ˆë¥´ê¸° ì£¼ì˜" },
      { name: "ê¹¨ë°œë„ ë¹„ê¸€", img: "./images/beagle.jpeg", traits: [9, 6, 10], tag: "#ì—ë„ˆì§€ì™•", desc: "ì§€ë£¨í•œ ê±´ ë”± ì§ˆìƒ‰ì¸ ë‹¹ì‹ ! ë¹„ê¸€ì˜ ë„˜ì¹˜ëŠ” ì—ë„ˆì§€ë¥¼ ê°ë‹¹í•  ìˆ˜ ìˆëŠ” ìœ ì¼í•œ ë¶„ì´ì‹œêµ°ìš”. ë§¤ì¼ì´ ì‹œíŠ¸ì½¤ì…ë‹ˆë‹¤.", health: "ë¹„ë§Œ ë° ê·€ ì—¼ì¦(ì™¸ì´ì—¼) ì£¼ì˜" },
      { name: "ì†œì‚¬íƒ• ë¹„ìˆ‘", img: "./images/bichon.jpeg", traits: [9, 4, 7], tag: "#íë§ê²¬", desc: "ë‹¤ì •ë‹¤ê°í•œ ì„±ê²©ì˜ ë‹¹ì‹ . ë¹„ìˆ‘ì˜ í­í’ ì• êµì— ë§¤ì¼ ë…¹ì•„ë‚´ë¦´ ê±°ì˜ˆìš”. í„¸ ê´€ë¦¬ì— ì •ì„±ì„ ìŸì„ ì¤€ë¹„ë§Œ í•˜ì‹œë©´ ë©ë‹ˆë‹¤!", health: "ë°±ë‚´ì¥ ë° ìŠ¬ê°œê³¨ íƒˆêµ¬ ì£¼ì˜" },
      { name: "ì‘ì€ ê±°ì¸ ì¹˜ì™€ì™€", img: "./images/chihuahua.jpeg", traits: [6, 1, 3], tag: "#ë‚´ì‚¬ë‘", desc: "ë‚´ ì‚¬ëŒ ì±™ê¸°ê¸°ë¥¼ ì¢‹ì•„í•˜ëŠ” ë‹¹ì‹ . ì¹˜ì™€ì™€ëŠ” ì§ˆíˆ¬ê°€ ë§ì•„ ë‹¹ì‹ ë§Œì„ ë°”ë¼ë³¼ ê±°ì˜ˆìš”. ì¢ì€ ì‹¤ë‚´ì—ì„œë„ í‚¤ìš°ê¸° ì¢‹ìŠµë‹ˆë‹¤.", health: "ì¹˜ì•„ ê´€ë¦¬ ë° ë‘ê°œê³¨ ì§ˆí™˜ ì£¼ì˜" },
      { name: "ì—‰ëš±ë§¤ë ¥ ì›°ì‹œì½”ê¸°", img: "./images/corgi.jpeg", traits: [8, 6, 9], tag: "#ì‹íƒì™•", desc: "ë¨¹ëŠ” ê²ƒê³¼ ë…¸ëŠ” ê²ƒì„ ì¢‹ì•„í•˜ëŠ” ë‹¹ì‹ ! ì½”ê¸°ì™€ í•¨ê»˜ ë§›ì§‘ íˆ¬ì–´ë„ í•˜ê³  ì‚°ì±…ë„ í•˜ë©° ì¦ê±°ìš´ ì¼ìƒì„ ë³´ë‚¼ ìˆ˜ ìˆì–´ìš”.", health: "í—ˆë¦¬ ë””ìŠ¤í¬(IVDD) ë° ë¹„ë§Œ ì£¼ì˜" },
      { name: "ìš°ì•„í•œ ëª°í‹°ì¦ˆ", img: "./images/maltese.jpeg", traits: [8, 2, 4], tag: "#êµ­ë¯¼ë°˜ë ¤ê²¬", desc: "ì§‘ì—ì„œ ì‰¬ëŠ” ê±¸ ì¢‹ì•„í•˜ëŠ” ë‹¹ì‹ . ì‘ê³  í•˜ì–€ ëª°í‹°ì¦ˆëŠ” ìµœê³ ì˜ ë£¸ë©”ì´íŠ¸ì…ë‹ˆë‹¤. ì°¸ì§€ ì•ŠëŠ” ì„±ê²©ì´ë‹ˆ ì˜¤ëƒì˜¤ëƒëŠ” ê¸ˆë¬¼!", health: "ìœ ë£¨ì¦(ëˆˆë¬¼ìêµ­) ë° ì‹¬ì¥ì§ˆí™˜ ì£¼ì˜" },
      { name: "ì¹´ë¦¬ìŠ¤ë§ˆ í—ˆìŠ¤í‚¤", img: "./images/husky.jpeg", traits: [5, 9, 10], tag: "#ì—‰ëš±í•¨", desc: "ììœ ë¡œìš´ ì˜í˜¼ì˜ ì†Œìœ ì! í—ˆìŠ¤í‚¤ì˜ ì—‰ëš±í•¨ê³¼ ëŒ€í™”í•˜ëŠ” ë“¯í•œ í•˜ìš¸ë§ì´ ë‹¹ì‹ ì˜ ì‚¶ì„ ì§€ë£¨í•˜ì§€ ì•Šê²Œ í•´ì¤„ ê±°ì˜ˆìš”.", health: "ì•ˆêµ¬ ì§ˆí™˜ ë° ê³ ê´€ì ˆ ì£¼ì˜" },
      { name: "ì²œì¬ê²¬ ë³´ë”ì½œë¦¬", img: "./images/collie.jpeg", traits: [7, 8, 10], tag: "#ì›Œì»¤í™€ë¦­", desc: "ì„±ì·¨ìš•ì´ ê°•í•˜ê³  í™œë™ì ì¸ ë‹¹ì‹ . ë³´ë”ì½œë¦¬ì™€ í•¨ê»˜ í”„ë¦¬ìŠ¤ë¹„ë‚˜ ì–´ì§ˆë¦¬í‹°ë¥¼ ë„ì „í•´ë³´ì„¸ìš”. ìµœê³ ì˜ íŒŒíŠ¸ë„ˆê°€ ë  ê²ë‹ˆë‹¤.", health: "ê´€ì ˆ ê´€ë¦¬ ë° ê²°ë§‰ì—¼ ì£¼ì˜" },
      { name: "ëŠê¸‹í•œ ì‹œì¸„", img: "./images/shihtzu.jpeg", traits: [5, 2, 2], tag: "#í‰í™”ì£¼ì˜ì", desc: "ì—¬ìœ ë¡­ê³  ëŠê¸‹í•œ ì„±ê²©ì˜ ë‹¹ì‹ . ì§–ì§€ ì•Šê³  ì–Œì „í•œ ì‹œì¸„ì™€ í•¨ê»˜ ì¡°ìš©í•˜ê³  í‰í™”ë¡œìš´ íë§ ë¼ì´í”„ë¥¼ ì¦ê²¨ë³´ì„¸ìš”.", health: "ì•ˆêµ¬ ê±´ì¡°ì¦ ë° í˜¸í¡ê¸° ì§ˆí™˜ ì£¼ì˜" },
      { name: "ê°œì„±íŒŒ í”„ë Œì¹˜ë¶ˆë…", img: "./images/frenchie.jpeg", traits: [6, 4, 4], tag: "#ë³¼ë§¤", desc: "ìœ ë‹ˆí¬í•œ ë§¤ë ¥ì„ ì•Œì•„ë³´ëŠ” ë‹¹ì‹ . ë¬´ëšëší•´ ë³´ì´ì§€ë§Œ ì•Œê³  ë³´ë©´ ì •ì´ ë§ì€ ë¶ˆë…ê³¼ ê¹Šì€ ìš°ì •ì„ ìŒ“ì„ ìˆ˜ ìˆì–´ìš”.", health: "ë‹¨ë‘ì¢… í˜¸í¡ê¸° ì¦í›„êµ° ë° í”¼ë¶€ë³‘ ì£¼ì˜" },
      { name: "ì•™í¼ìƒí¼ í¬ë©”ë¼ë‹ˆì•ˆ", img: "./images/pomeranian.jpeg", traits: [7, 2, 4], tag: "#ì¸í˜•ë¯¸ëª¨", desc: "ì‘ì§€ë§Œ ìš©ê°í•˜ê³  ìê¸°ì• ê°€ ê°•í•œ í¬ë©”! í™”ë ¤í•œ í„¸ ê´€ë¦¬ì™€ ì•™ì¹¼ì§„ ì„±ê²©ì„ ë°›ì•„ì¤„ ìˆ˜ ìˆëŠ” ë‹¹ì‹ ì—ê²Œ ì¶”ì²œí•©ë‹ˆë‹¤.", health: "ìŠ¬ê°œê³¨ íƒˆêµ¬ ë° ê³¨ì ˆ ì£¼ì˜" },
      { name: "ìš©ê°í•œ ë‹¥ìŠ¤í›ˆíŠ¸", img: "./images/dachshund.jpeg", traits: [8, 3, 6], tag: "#ìˆë‹¤ë¦¬", desc: "í˜¸ê¸°ì‹¬ ë§ê³  ê³ ì§‘ ì„¼ ì‚¬ëƒ¥ê°œ ë³¸ëŠ¥! ë‹¥ìŠ¤í›ˆíŠ¸ì˜ ê³ ì§‘ì„ ê·€ì—½ê²Œ ë´ì¤„ ìˆ˜ ìˆëŠ” ì¸ë‚´ì‹¬ ë§ì€ ë‹¹ì‹ ê³¼ ì˜ ë§ìŠµë‹ˆë‹¤.", health: "í—ˆë¦¬ ë””ìŠ¤í¬ ë° ë¹„ë§Œ ì£¼ì˜" },
      { name: "ìš”ì • ìš”í¬ì…” í…Œë¦¬ì–´", img: "./images/yorkie.jpeg", traits: [8, 2, 3], tag: "#ì›€ì§ì´ëŠ”ë³´ì„", desc: "í™”ë ¤í•œ í„¸ê³¼ ë„ë„í•œ ì„±ê²©ì˜ ìš”í‚¤. ì£¼ì¸ì—ê²ŒëŠ” ì• êµìŸì´ì§€ë§Œ ë‚¯ì„  ì´ì—ê²ŒëŠ” ê¹Œì¹ í•œ ë§¤ë ¥ì´ ìˆì£ . í„¸ ê´€ë¦¬ëŠ” í•„ìˆ˜!", health: "ê¸°ê´€ì§€ í˜‘ì°© ë° ì¹˜ì•„ ì§ˆí™˜ ì£¼ì˜" },
      { name: "ë¯¸ì†Œì²œì‚¬ ì‚¬ëª¨ì˜ˆë“œ", img: "./images/samoyed.jpeg", traits: [9, 9, 9], tag: "#ì†œì‚¬íƒ•", desc: "í•­ìƒ ì›ƒê³  ìˆëŠ” ì–¼êµ´ì˜ ì‚¬ëª¨ì˜ˆë“œ! ì—„ì²­ë‚œ í„¸ ë¹ ì§ê³¼ í™œë™ëŸ‰ì„ ê°ë‹¹í•  ìˆ˜ ìˆë‹¤ë©´, ì„¸ìƒì—ì„œ ê°€ì¥ í–‰ë³µí•œ ë°˜ë ¤ê²¬ì´ ë©ë‹ˆë‹¤.", health: "ê³ ê´€ì ˆ ë° ë‹¹ë‡¨ë³‘ ì£¼ì˜" }
    ];

    // â˜…â˜…â˜… ì§ˆë¬¸ì§€ ì—…ê·¸ë ˆì´ë“œ (ì•„ì´ì½˜ ì¶”ê°€) â˜…â˜…â˜…
    const questions = [
      { icon: "ğŸ ", q: "í˜„ì¬ ê±°ì£¼í•˜ê³  ê³„ì‹  ì£¼ê±° í˜•íƒœëŠ”?", a: "ì›ë£¸/ì˜¤í”¼ìŠ¤í…”/ì•„íŒŒíŠ¸ (ì‹¤ë‚´)", b: "ë§ˆë‹¹ì´ ìˆëŠ” ì£¼íƒ/ë„“ì€ ì‹¤ë‚´", impact: [0, -2, 0] },
      { icon: "ğŸ›Œ", q: "ì£¼ë§ ì•„ì¹¨, ì´ìƒì ì¸ íœ´ì‹ ë°©ë²•ì€?", a: "ì´ë¶ˆ ë°–ì€ ìœ„í—˜í•´.. ì§‘ì½• íë§", b: "ë‚ ì”¨ ì¢‹ì€ë° ë¬´ì¡°ê±´ ë‚˜ê°€ì•¼ì§€!", impact: [0, 0, 3] },
      { icon: "ğŸ§¹", q: "ê²€ì€ ì˜·ì— í•˜ì–€ ê°•ì•„ì§€ í„¸ì´ ë¬»ëŠ”ë‹¤ë©´?", a: "ìœ¼ì•… ì ˆëŒ€ ì‹«ì–´! ëŒëŒì´ í•„ìˆ˜.", b: "ê°•ì•„ì§€ í‚¤ìš°ë©´ ë‹¹ì—°í•œ ê±°ì§€. ê´œì°®ë‹¤.", impact: [0, -1, 0] },
      { icon: "ğŸ’", q: "ê°•ì•„ì§€ì™€ì˜ ê´€ê³„, ë‹¹ì‹ ì˜ ë¡œë§ì€?", a: "ë‚˜ë§Œ ë°”ë¼ë³´ëŠ” ê»Œë”±ì§€ (ì• êµ)", b: "ì„œë¡œ ì‚¬ìƒí™œ ì¡´ì¤‘í•˜ëŠ” ë£¸ë©”ì´íŠ¸ (ë…ë¦½)", impact: [-3, 0, 0] },
      { icon: "â°", q: "í•˜ë£¨ì— ê°•ì•„ì§€ ì‚°ì±…, ì–¼ë§ˆë‚˜ ê°€ëŠ¥í•˜ì„¸ìš”?", a: "ë°”ë¹ ì„œ 30ë¶„ ë‚´ì™¸ê°€ í•œê³„..", b: "1ì‹œê°„ ì´ìƒ ë§¤ì¼ ê°€ëŠ¥!", impact: [0, 0, 2] },
      { icon: "ğŸ—£ï¸", q: "ì‚°ì±… ì¤‘ ë‚¯ì„  ì‚¬ëŒì´ ë§ì„ ê±´ë‹¤ë©´?", a: "ì–´ìƒ‰í•˜ê²Œ ì›ƒê³  ìë¦¬ë¥¼ í”¼í•œë‹¤.", b: "ì˜¤! ì•ˆë…•í•˜ì„¸ìš”! ê¸ˆë°© ìˆ˜ë‹¤ë¥¼ ë–¤ë‹¤.", impact: [2, 0, 0] },
      { icon: "ğŸ’°", q: "ëŒ€í˜•ê²¬ì€ ë³‘ì›ë¹„/ì‹ë¹„ê°€ ì†Œí˜•ê²¬ì˜ 3ë°°ì…ë‹ˆë‹¤.", a: "í˜„ì‹¤ì ìœ¼ë¡œ ë¶€ë‹´ìŠ¤ëŸ½ë‹¤.", b: "ìƒê´€ì—†ë‹¤. ë“ ë“ í•œ ê²Œ ì¢‹ë‹¤.", impact: [0, -2, 0] },
      { icon: "ğŸ›", q: "ë§¤ì¼ ë¹—ì§ˆí•˜ê³  ëˆˆë¬¼ìêµ­ ë‹¦ì•„ì£¼ëŠ” ê²ƒ, ìì‹  ìˆë‚˜ìš”?", a: "ì†”ì§íˆ ì¢€ ê·€ì°®ì„ ê²ƒ ê°™ë‹¤.", b: "ë‚´ ê°•ì•„ì§€ ì˜ˆë»ì§€ëŠ” ê±´ë° ë‹¹ì—°í•˜ì§€!", impact: [0, -1, 0] },
      { icon: "ğŸ“", q: "ê°•ì•„ì§€ê°€ ë§ì„ ì•ˆ ë“£ê³  ê³ ì§‘ì„ ë¶€ë¦°ë‹¤ë©´?", a: "ì–´íœ´.. ì¢€ ë‹µë‹µí•  ê²ƒ ê°™ë‹¤.", b: "ë‹¨í˜¸í•˜ê²Œ í›ˆìœ¡í•˜ê±°ë‚˜ ì „ë¬¸ê°€ë¥¼ ë¶€ë¥¸ë‹¤.", impact: [0, 0, 1] },
      { icon: "ğŸ”Š", q: "ì´ì›ƒì§‘ ì†ŒìŒ ë¯¼ì›ì´ ê±±ì •ë˜ì‹œë‚˜ìš”?", a: "ë„¤, ë°©ìŒì´ ì˜ ì•ˆë¼ì„œ ì¡°ìš©í•´ì•¼ í•´ìš”.", b: "ì£¼íƒì´ë¼ ì¢€ ì§–ì–´ë„ ê´œì°®ì•„ìš”.", impact: [0, -1, 0] },
      { icon: "ğŸ¦ ", q: "ê°•ì•„ì§€ê°€ ë‚´ ì¹¨ëŒ€ì— ì˜¬ë¼ì™€ì„œ ìëŠ” ê±´?", a: "ì ˆëŒ€ ì•ˆë¨. ì ìë¦¬ëŠ” ë¶„ë¦¬!", b: "ë„ˆë¬´ ì¢‹ì•„! ê»´ì•ˆê³  ì˜ë˜.", impact: [-1, 0, 0] },
      { icon: "ğŸšª", q: "ì§‘ì„ ë¹„ìš°ëŠ” ì‹œê°„ì´ í•˜ë£¨ì— ì–¼ë§ˆë‚˜ ë˜ë‚˜ìš”?", a: "8ì‹œê°„ ì´ìƒ (ì§ì¥ì¸)", b: "ê±°ì˜ ì§‘ì— ìˆê±°ë‚˜ ì¬íƒê·¼ë¬´", impact: [0, 0, -1] }
    ];

    let qIdx = 0;
    let userScore = [5, 5, 3]; 
    let currentDog = null;

    function scrollToTop() { window.scrollTo(0, 0); }

    function startTest() {
      document.querySelector('#screen-start').classList.remove('active');
      document.querySelector('#screen-question').classList.add('active');
      scrollToTop();
      loadQuestion();
    }

    function loadQuestion() {
      const q = questions[qIdx];
      // ì•„ì´ì½˜ ë° í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
      document.getElementById('q-icon').innerText = q.icon; 
      document.getElementById('q-text').innerText = q.q;
      document.getElementById('ans-a').innerText = q.a;
      document.getElementById('ans-b').innerText = q.b;
      
      // â˜…â˜…â˜… ì¤‘ìš”: ì§„í–‰ë°”ì™€ ìŠ¤í… í‘œì‹œ ì—…ë°ì´íŠ¸ â˜…â˜…â˜…
      document.getElementById('q-idx').innerText = qIdx + 1;
      document.getElementById('progress').style.width = ((qIdx + 1) / questions.length * 100) + "%";
      
      // ì§ˆë¬¸ í˜ì´ì§€ ê´‘ê³  ë¡œë“œ ì‹œë„ (ads.jsê°€ ìˆë‹¤ë©´)
      if(window.injectAd) window.injectAd("ad-container-question", "2345678901", "rectangle");
    }

    function nextQuestion(choice) {
      const impact = questions[qIdx].impact;
      if (choice === 0) {
        userScore[0] -= impact[0]; userScore[1] += impact[1]; userScore[2] -= impact[2];
      } else {
        userScore[0] += impact[0]; userScore[1] -= impact[1]; userScore[2] += impact[2];
      }
      qIdx++;
      scrollToTop();
      if (qIdx < questions.length) loadQuestion();
      else showLoading();
    }

    function showLoading() {
      document.querySelector('#screen-question').classList.remove('active');
      document.querySelector('#screen-loading').classList.add('active');
      scrollToTop();
      
      const msgs = ["ğŸ  ê±°ì£¼ í™˜ê²½ ë¶„ì„ ì¤‘...", "ğŸ§¬ ì„±í–¥ ë°ì´í„° ëŒ€ì¡° ì¤‘...", "ğŸ¥ ìœ ì „ì  ê±´ê°• ì²´í¬ ì¤‘...", "âœ¨ ìµœì¢… ë§¤ì¹­ ì™„ë£Œ!"];
      let i = 0;
      const textInterval = setInterval(() => {
        if(i < msgs.length) document.getElementById('load-msg').innerText = msgs[i++];
      }, 800);

      setTimeout(() => {
        clearInterval(textInterval);
        calculateResult();
      }, 3200);
    }

    function calculateResult() {
      let bestDog = dogs[0];
      let minDiff = 999;

      dogs.forEach(dog => {
        let diff = Math.abs(userScore[0] - dog.traits[0]) * 1.0 +
                   Math.abs(userScore[1] - dog.traits[1]) * 1.5 + 
                   Math.abs(userScore[2] - dog.traits[2]) * 1.2;
        if (diff < minDiff) { minDiff = diff; bestDog = dog; }
      });
      currentDog = bestDog;

      let matchScore = Math.floor((1 - (minDiff / 25)) * 100);
      if (matchScore > 98) matchScore = 98; if (matchScore < 70) matchScore = 70;

      document.getElementById('res-name').innerText = bestDog.name;
      document.getElementById('res-img').src = bestDog.img; 
      document.getElementById('res-desc').innerText = bestDog.desc;
      document.getElementById('res-tag').innerText = bestDog.tag;
      document.getElementById('match-percent').innerText = matchScore; 
      document.getElementById('res-health').innerText = bestDog.health;
      document.getElementById('ins-btn-text').innerText = bestDog.name.split(' ').pop() + " ë³´í—˜ë£Œ 10ì´ˆ í™•ì¸ >";

      window.requestAnimationFrame(() => {
        document.getElementById('score-chem').style.width = (bestDog.traits[0] * 10) + "%";
        document.getElementById('score-env').style.width = (bestDog.traits[1] * 10) + "%";
        document.getElementById('score-energy').style.width = (bestDog.traits[2] * 10) + "%";
      });

      document.querySelector('#screen-loading').classList.remove('active');
      document.querySelector('#screen-result').classList.add('active');
      scrollToTop();
      
      confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
    }

    function shareFinalResult() {
        if (!currentDog) return;
        const shareData = {
            title: `ë‚˜ì˜ ìš´ëª…ì  ë°˜ë ¤ê²¬ì€ [${currentDog.name}]!`,
            text: `ë‚˜ì—ê²Œ ë”± ë§ëŠ” ê°•ì•„ì§€ëŠ” ëˆ„êµ¬ì¼ê¹Œìš”? ì§€ê¸ˆ í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”!`,
            url: window.location.href,
        };
        if (navigator.share) {
            navigator.share(shareData).catch(console.error);
        } else {
            navigator.clipboard.writeText(shareData.title + '\n' + shareData.url).then(() => {
                alert("ğŸ”— ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!");
            });
        }
    }

    function openModal(type) {
      const title = document.getElementById('modal-title');
      const body = document.getElementById('modal-body');
      const overlay = document.getElementById('modal-overlay');
      if (type === 'terms') {
        title.innerText = "ì´ìš©ì•½ê´€"; body.innerText = "ë³¸ ì„œë¹„ìŠ¤ëŠ” ì¬ë¯¸ë¥¼ ìœ„í•œ ì‹¬ë¦¬ í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤. ì…ì–‘ ê²°ì •ì€ ì‹ ì¤‘í•˜ê²Œ í•˜ì„¸ìš”.";
      } else {
        title.innerText = "ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨"; body.innerText = "ê°œì¸ì •ë³´ë¥¼ ì €ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì¿ í‚¤ëŠ” ê´‘ê³  ë° ë¶„ì„ìš©ìœ¼ë¡œë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤.";
      }
      overlay.style.display = 'flex';
    }

    function closeModal(e) {
      if (!e || e.target.id === 'modal-overlay' || e.target.className === 'modal-close') {
        document.getElementById('modal-overlay').style.display = 'none';
      }
    }
    //]]>
  </script>
</body>
</html>
