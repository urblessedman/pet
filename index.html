<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>ë°˜ë ¤ê²¬ ë§¤ì¹­ ì‹œìŠ¤í…œ (ì„±ê²©+í™˜ê²½ ì¢…í•©ë¶„ì„)</title>
  <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/1076/1076928.png" />
  <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

  <script src="ads.js" defer></script>

  <style>
    /* ê¸°ì¡´ CSS ìŠ¤íƒ€ì¼ ê·¸ëŒ€ë¡œ ìœ ì§€ (ìƒëµ ì—†ì´ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì„¸ìš”) */
    :root { --bg-color: #F8F9FA; --primary-color: #6C5CE7; --secondary-color: #00CEC9; --accent-color: #FF7675; --text-color: #2D3436; --white: #ffffff; --shadow: 0 10px 30px rgba(108, 92, 231, 0.15); --radius: 20px; }
    * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
    body { font-family: 'Noto Sans KR', sans-serif; background-color: var(--bg-color); color: var(--text-color); display: flex; justify-content: center; min-height: 100vh; }
    #app-container { width: 100%; max-width: 500px; background: var(--white); min-height: 100vh; box-shadow: var(--shadow); display: flex; flex-direction: column; position: relative; }
    header { padding: 18px; text-align: center; font-family: 'Jua', sans-serif; color: var(--text-color); font-size: 1.2rem; border-bottom: 1px solid #eee; background: rgba(255,255,255,0.95); position: sticky; top: 0; z-index: 10; backdrop-filter: blur(5px); }
    header i { color: var(--primary-color); margin-right: 5px; }
    main { flex: 1; padding: 20px; display: flex; flex-direction: column; align-items: center; text-align: center; }
    .screen { display: none; width: 100%; animation: fadeIn 0.5s cubic-bezier(0.22, 1, 0.36, 1); }
    .screen.active { display: flex; flex-direction: column; align-items: center; }
    .hero-img { content: url('https://images.unsplash.com/photo-1518717758536-85ae29035b6d?w=600'); width: 100%; height: 260px; object-fit: cover; border-radius: var(--radius); margin-bottom: 25px; box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
    h1 { font-family: 'Jua', sans-serif; font-size: 2.1rem; margin-bottom: 10px; line-height: 1.3; color: #111; }
    h1 span { color: var(--primary-color); position: relative; z-index: 1; }
    h1 span::after { content:''; position: absolute; bottom: 2px; left: 0; width: 100%; height: 10px; background: #dfe6e9; z-index: -1; opacity: 0.5; }
    .subtitle { color: #636E72; font-size: 1rem; margin-bottom: 30px; line-height: 1.6; }
    .tags-cloud { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; margin-bottom: 30px; }
    .tag-bubble { background: #f1f2f6; padding: 6px 12px; border-radius: 15px; font-size: 0.85rem; color: #555; font-weight: bold; }
    .tag-bubble.highlight { background: #EBE5FC; color: var(--primary-color); }
    .btn-primary { background: linear-gradient(135deg, var(--primary-color), #a29bfe); color: white; border: none; padding: 18px 0; width: 100%; font-size: 1.2rem; border-radius: var(--radius); font-weight: 700; font-family: 'Jua'; cursor: pointer; box-shadow: 0 8px 20px rgba(108, 92, 231, 0.3); transition: transform 0.1s; position: relative; overflow: hidden; }
    .btn-primary:active { transform: scale(0.98); }
    .progress-wrapper { width: 100%; margin-bottom: 30px; }
    .progress-bar { width: 100%; height: 8px; background: #E5E7EB; border-radius: 10px; overflow: hidden; }
    .progress-fill { height: 100%; background: var(--primary-color); width: 0%; transition: width 0.4s ease; border-radius: 10px; }
    .step-text { text-align: right; font-size: 0.8rem; color: #aaa; margin-top: 5px; font-weight: bold; }
    .question-category { color: var(--secondary-color); font-weight: 800; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 10px; }
    .question-box h2 { font-family: 'Jua', sans-serif; font-size: 1.6rem; margin-bottom: 30px; line-height: 1.4; color: #2D3436; word-break: keep-all; }
    .option-btn { width: 100%; padding: 22px; margin-bottom: 15px; border: 2px solid #F0F2F5; border-radius: 18px; background: white; font-size: 1rem; font-weight: 500; color: #444; cursor: pointer; transition: all 0.2s; text-align: left; display: flex; align-items: center; justify-content: space-between; }
    .option-btn:hover { border-color: var(--primary-color); background-color: #F8F7FF; color: var(--primary-color); transform: translateY(-2px); }
    .option-btn i { font-size: 1.2rem; opacity: 0.5; }
    .option-btn:hover i { opacity: 1; color: var(--primary-color); }
    .loading-container { height: 60vh; display: flex; flex-direction: column; justify-content: center; align-items: center; }
    .dna-spinner { font-size: 3rem; color: var(--primary-color); animation: spin 2s infinite linear; margin-bottom: 20px; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    .loading-text { font-family: 'Jua'; font-size: 1.5rem; margin-bottom: 10px; }
    .loading-sub { color: #888; font-size: 0.9rem; }
    .score-badge { background: #2D3436; color: white; padding: 6px 15px; border-radius: 20px; font-weight: bold; font-size: 0.9rem; display: inline-flex; align-items: center; margin-bottom: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
    .score-badge i { color: #FF7675; margin-right: 5px; }
    .result-name { font-family: 'Jua', sans-serif; font-size: 2.4rem; color: var(--primary-color); margin-bottom: 15px; }
    .result-img-wrapper { position: relative; width: 220px; height: 220px; margin: 0 auto 25px; }
    .result-img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; border: 8px solid white; box-shadow: 0 15px 35px rgba(0,0,0,0.15); }
    .match-label { position: absolute; bottom: 10px; right: 0; background: var(--secondary-color); color: white; padding: 5px 10px; border-radius: 10px; font-size: 0.8rem; font-weight: bold; }
    .radar-box { background: #F8F9FA; border-radius: 15px; padding: 20px; margin: 0 20px 25px; }
    .radar-row { display: flex; align-items: center; margin-bottom: 10px; }
    .radar-label { width: 70px; text-align: left; font-size: 0.85rem; font-weight: bold; color: #555; }
    .radar-bar-bg { flex: 1; height: 8px; background: #e0e0e0; border-radius: 4px; overflow: hidden; }
    .radar-bar-fill { height: 100%; border-radius: 4px; width: 0%; transition: width 0s ease; } 
    .bar-1 { background: var(--primary-color); }
    .bar-2 { background: var(--secondary-color); }
    .bar-3 { background: var(--accent-color); }
    .desc-box { text-align: left; line-height: 1.7; font-size: 0.95rem; color: #444; margin: 0 20px 30px; padding: 20px; background: #fff; border: 2px solid #f1f2f6; border-radius: 15px; }
    .desc-title { font-weight: bold; color: var(--primary-color); margin-bottom: 5px; display: block; }
    .insurance-alert { background: #FFF5F5; border: 1px solid #FEB2B2; border-radius: var(--radius); padding: 20px; margin: 0 20px 25px; text-align: left; position: relative; overflow: hidden; }
    .insurance-alert::before { content:''; position: absolute; top:0; left:0; width: 5px; height: 100%; background: #FC8181; }
    .alert-header { display: flex; align-items: center; margin-bottom: 10px; color: #C53030; font-weight: 800; font-size: 1rem; }
    .alert-body { font-size: 0.9rem; color: #4A5568; margin-bottom: 15px; }
    .ins-btn { display: block; width: 100%; background: #C53030; color: white; text-align: center; padding: 12px; border-radius: 10px; font-weight: bold; text-decoration: none; box-shadow: 0 4px 10px rgba(197, 48, 48, 0.3); transition: transform 0.1s; }
    .ins-btn:active { transform: scale(0.98); }
    .btn-share { background: #FEE500; color: #3c1e1e; border: none; padding: 15px; width: 100%; border-radius: 12px; font-weight: bold; cursor: pointer; font-size: 1rem; }
    .btn-retry { background: white; border: 2px solid #eee; padding: 15px; width: 100%; border-radius: 12px; font-weight: bold; color: #666; cursor: pointer; margin-top: 10px;}
    
    /* ê´‘ê³  ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ (ë¹ˆ ê³µê°„ í™•ë³´) */
    .ad-area { width: 100%; min-height: 100px; background: #f8f9fa; margin-top: 20px; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #ccc; font-size: 0.8rem; }
    .ad-loading { width: 300px; height: 250px; background: #f1f2f6; border-radius: 15px; margin-top: 30px; display: flex; align-items: center; justify-content: center; color: #bdc3c7; font-weight: bold; border: 2px dashed #dcdde1; }
  </style>
</head>
<body>
  
  <div id="app-container">
    <header><i class="fas fa-paw"></i> ëŒ•ëŒ•ì´ ì—°êµ¬ì†Œ</header>
    
    <main>
      <div id="screen-start" class="screen active">
        <img class="hero-img" alt="main"/>
        
        <div class="tags-cloud">
          <span class="tag-bubble highlight">#ì„±ê²©ë§¤ì¹­</span>
          <span class="tag-bubble">#ê±°ì£¼í™˜ê²½</span>
          <span class="tag-bubble">#í™œë™ëŸ‰</span>
          <span class="tag-bubble highlight">#ì–‘ìœ¡ë‚œì´ë„</span>
        </div>

        <h1>ë‚˜ì˜ ìš´ëª…ì <br/><span>ë°˜ë ¤ê²¬ ì°¾ê¸°</span></h1>
        <p class="subtitle">ë‚˜ì˜ <strong>ì„±ê²©(MBTI)</strong>ê³¼ <strong>í˜„ì‹¤ ì¡°ê±´</strong>ì„<br/>ëª¨ë‘ ê³ ë ¤í•œ AI ì •ë°€ ë¶„ì„ ì‹œìŠ¤í…œ</p>

        <button class="btn-primary" onclick="startTest()">ë§¤ì¹­ ì‹œì‘í•˜ê¸°</button>
        
        <div id="ad-container-main" class="ad-area">AD LOADING...</div>
      </div>

      <div id="screen-question" class="screen">
        <div class="progress-wrapper">
          <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>
          <div class="step-text">Step <span id="q-idx">1</span> / 7</div>
        </div>
        <div class="question-category" id="q-cat">CATEGORY</div>
        <div class="question-box">
          <h2 id="q-text">ì§ˆë¬¸ í…ìŠ¤íŠ¸...</h2>
          <button class="option-btn" onclick="nextQuestion(0)">
            <span id="ans-a">ì˜µì…˜ A</span> <i class="far fa-check-circle"></i>
          </button>
          <button class="option-btn" onclick="nextQuestion(1)">
            <span id="ans-b">ì˜µì…˜ B</span> <i class="far fa-check-circle"></i>
          </button>
        </div>
      </div>

      <div id="screen-loading" class="screen">
        <div class="loading-container">
          <i class="fas fa-dna dna-spinner"></i>
          <h2 class="loading-text">ë°ì´í„° ë¶„ì„ ì¤‘...</h2>
          <p class="loading-sub">ì„±ê²© ìœ í˜•ê³¼ í™˜ê²½ ì í•©ë„ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.</p>
          
          <div id="ad-container-loading" class="ad-loading">PREMIUM AD</div>
        </div>
      </div>

      <div id="screen-result" class="screen">
        <div class="score-badge"><i class="fas fa-heart"></i> ë§¤ì¹­ë¥  <span id="match-percent">97</span>%</div>
        <h1 class="result-name" id="res-name">ê²¬ì¢… ì´ë¦„</h1>
        
        <div class="result-img-wrapper">
          <img src="" id="res-img" class="result-img" alt="result"/>
          <div class="match-label" id="res-tag">#ì²œìƒì—°ë¶„</div>
        </div>

        <div class="radar-box">
          <div class="radar-row">
            <span class="radar-label">ì„±ê²© ì¼€ë¯¸</span>
            <div class="radar-bar-bg"><div class="radar-bar-fill bar-1" id="score-chem"></div></div>
          </div>
          <div class="radar-row">
            <span class="radar-label">í™˜ê²½ ì í•©</span>
            <div class="radar-bar-bg"><div class="radar-bar-fill bar-2" id="score-env"></div></div>
          </div>
          <div class="radar-row">
            <span class="radar-label">í™œë™ ì—ë„ˆì§€</span>
            <div class="radar-bar-bg"><div class="radar-bar-fill bar-3" id="score-energy"></div></div>
          </div>
        </div>

        <div class="desc-box">
          <span class="desc-title">ğŸ“ ë¶„ì„ ê²°ê³¼:</span>
          <span id="res-desc">ì„¤ëª… ë‚´ìš©...</span>
        </div>

        <div class="insurance-alert">
          <div class="alert-header"><i class="fas fa-file-medical-alt"></i> ê±´ê°• ê´€ë¦¬ ì£¼ì˜ì‚¬í•­</div>
          <div class="alert-body">
            <span id="res-health">ì´ ê²¬ì¢…ì€ ìŠ¬ê°œê³¨ íƒˆêµ¬ ìœ„í—˜ì´ ë†’ìŠµë‹ˆë‹¤.</span><br/>
            ë¯¸ë¦¬ ëŒ€ë¹„í•˜ì§€ ì•Šìœ¼ë©´ ë³‘ì›ë¹„ ë¶€ë‹´ì´ í´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
          </div>
          <a href="https://smartkrinsurance.com" target="_blank" class="ins-btn">
            <span id="ins-btn-text">ì˜ˆìƒ ë³´í—˜ë£Œ 10ì´ˆ í™•ì¸ ></span>
          </a>
        </div>

        <button class="btn-share" onclick="shareFinalResult()"><i class="fas fa-share-alt"></i> ê²°ê³¼ ê³µìœ í•˜ê¸°</button>
        <button class="btn-retry" onclick="location.reload()">ğŸ”„ ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸°</button>

        <div id="ad-container-result" class="ad-area">AD LOADING...</div>
      </div>
    </main>
  </div>

  <script>
    // 1. ë°ì´í„°ë² ì´ìŠ¤ (ì´ë¯¸ì§€ ë§í¬ëŠ” ë‚˜ì¤‘ì— Imgur ë“±ìœ¼ë¡œ êµì²´í•˜ì„¸ìš”)
    const dogs = [
      { name: "í•µì¸ì‹¸ ê³¨ë“  ë¦¬íŠ¸ë¦¬ë²„", img: "https://i.imgur.com/gK8eP3R.png", 
        traits: [10, 8, 10], tag: "#ì²œì‚¬ê²¬",
        desc: "ì‚¬ëŒì„ ë„ˆë¬´ ì¢‹ì•„í•˜ëŠ” ë‹¹ì‹ ê³¼ ê¸ì •ì™• ë¦¬íŠ¸ë¦¬ë²„ëŠ” í™˜ìƒì˜ ì§ê¿ì…ë‹ˆë‹¤! ë‹¤ë§Œ í„¸ ë¹ ì§ê³¼ í™œë™ëŸ‰ì´ ë§ì•„ ë„“ì€ ê³µê°„ê³¼ ë¶€ì§€ëŸ°í•¨ì´ í•„ìš”í•´ìš”.",
        health: "ê³ ê´€ì ˆ ì´í˜•ì„±ì¦ ë° í”¼ë¶€ì§ˆí™˜ ì£¼ì˜" },
      { name: "ë˜‘ìŸì´ í† ì´ í‘¸ë“¤", img: "https://i.imgur.com/rN5hP1A.png", 
        traits: [9, 3, 5], tag: "#ì§€ëŠ¥1ìœ„",
        desc: "ì„¬ì„¸í•˜ê³  ë˜‘ë˜‘í•œ ë‹¹ì‹ ì—ê²Œ ë”±! í„¸ ë¹ ì§ì´ ì ì–´ ì•„íŒŒíŠ¸ ìƒí™œì— ìµœì í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ëˆˆì¹˜ê°€ ë¹¨ë¼ êµê°í•˜ëŠ” ì¬ë¯¸ê°€ ìˆì„ ê±°ì˜ˆìš”.",
        health: "ìŠ¬ê°œê³¨ íƒˆêµ¬ ë° ì™¸ì´ì—¼ ì£¼ì˜" },
      { name: "ì‹œí¬í•œ ì‹œë°”ê²¬", img: "https://i.imgur.com/1G2jK0L.png", 
        traits: [2, 5, 6], tag: "#ë°€ë‹¹ê³ ìˆ˜",
        desc: "ìê¸°ë§Œì˜ ì‹œê°„ì´ í•„ìš”í•œ ë‹¹ì‹ . ë…ë¦½ì ì¸ ì„±í–¥ì˜ ì‹œë°”ê²¬ê³¼ëŠ” ì„œë¡œì˜ ì˜ì—­ì„ ì¡´ì¤‘í•˜ë©° ì¿¨í•œ ë™ê±°ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë‹¨, í„¸ì€ ë§ì´ ë¹ ì ¸ìš”!",
        health: "ì•„í† í”¼ í”¼ë¶€ì—¼ ë° ì•Œë ˆë¥´ê¸° ì£¼ì˜" },
      { name: "ê¹¨ë°œë„ ë¹„ê¸€", img: "https://i.imgur.com/7b7fQ8g.png", 
        traits: [9, 6, 10], tag: "#ì—ë„ˆì§€ì™•",
        desc: "ì§€ë£¨í•œ ê±´ ë”± ì§ˆìƒ‰ì¸ ë‹¹ì‹ ! ë¹„ê¸€ì˜ ë„˜ì¹˜ëŠ” ì—ë„ˆì§€ë¥¼ ê°ë‹¹í•  ìˆ˜ ìˆëŠ” ìœ ì¼í•œ ë¶„ì´ì‹œêµ°ìš”. ë§¤ì¼ë§¤ì¼ì´ ì‹œíŠ¸ì½¤ì´ ë  ê±°ì˜ˆìš”.",
        health: "ë¹„ë§Œ ë° ê·€ ì—¼ì¦(ì™¸ì´ì—¼) ì£¼ì˜" },
      { name: "ì†œì‚¬íƒ• ë¹„ìˆ‘", img: "https://i.imgur.com/2K1zT8P.png", 
        traits: [9, 4, 7], tag: "#íë§ê²¬",
        desc: "ë‹¤ì •ë‹¤ê°í•œ ì„±ê²©ì˜ ë‹¹ì‹ . ë¹„ìˆ‘ì˜ í­í’ ì• êµì— ë§¤ì¼ ë…¹ì•„ë‚´ë¦´ ê±°ì˜ˆìš”. í„¸ ê´€ë¦¬ì— ì •ì„±ì„ ìŸì„ ì¤€ë¹„ë§Œ í•˜ì‹œë©´ ë©ë‹ˆë‹¤!",
        health: "ë°±ë‚´ì¥ ë° ìŠ¬ê°œê³¨ íƒˆêµ¬ ì£¼ì˜" },
      { name: "ì‘ì€ ê±°ì¸ ì¹˜ì™€ì™€", img: "https://i.imgur.com/X4y2hW5.png", 
        traits: [6, 1, 3], tag: "#ë‚´ì‚¬ë‘",
        desc: "ë‚´ ì‚¬ëŒ ì±™ê¸°ê¸°ë¥¼ ì¢‹ì•„í•˜ëŠ” ë‹¹ì‹ . ì¹˜ì™€ì™€ëŠ” ì§ˆíˆ¬ê°€ ë§ì•„ ë‹¹ì‹ ë§Œì„ ë°”ë¼ë³¼ ê±°ì˜ˆìš”. ì¢ì€ ì‹¤ë‚´ì—ì„œë„ í‚¤ìš°ê¸° ë¶€ë‹´ ì—†ìŠµë‹ˆë‹¤.",
        health: "ì¹˜ì•„ ê´€ë¦¬ ë° ë‘ê°œê³¨ ì§ˆí™˜ ì£¼ì˜" },
      { name: "ì—‰ëš±ë§¤ë ¥ ì›°ì‹œì½”ê¸°", img: "https://i.imgur.com/j1xG7tP.png", 
        traits: [8, 6, 9], tag: "#ì‹íƒì™•",
        desc: "ë¨¹ëŠ” ê²ƒê³¼ ë…¸ëŠ” ê²ƒì„ ì¢‹ì•„í•˜ëŠ” ë‹¹ì‹ ! ì½”ê¸°ì™€ í•¨ê»˜ ë§›ì§‘ íˆ¬ì–´ë„ í•˜ê³  ì‚°ì±…ë„ í•˜ë©° ì¦ê±°ìš´ ì¼ìƒì„ ë³´ë‚¼ ìˆ˜ ìˆì–´ìš”. í„¸ì€ ì¢€ ë¹ ì§‘ë‹ˆë‹¤!",
        health: "í—ˆë¦¬ ë””ìŠ¤í¬(IVDD) ë° ë¹„ë§Œ ì£¼ì˜" },
      { name: "ìš°ì•„í•œ ëª°í‹°ì¦ˆ", img: "https://i.imgur.com/b9J3E6t.png", 
        traits: [8, 2, 4], tag: "#êµ­ë¯¼ë°˜ë ¤ê²¬",
        desc: "ì§‘ì—ì„œ ì‰¬ëŠ” ê±¸ ì¢‹ì•„í•˜ëŠ” ë‹¹ì‹ . ì‘ê³  í•˜ì–€ ëª°í‹°ì¦ˆëŠ” ìµœê³ ì˜ ë£¸ë©”ì´íŠ¸ì…ë‹ˆë‹¤. ì°¸ì§€ ì•ŠëŠ” ì„±ê²©ì´ë‹ˆ ì˜¤ëƒì˜¤ëƒëŠ” ê¸ˆë¬¼!",
        health: "ìœ ë£¨ì¦(ëˆˆë¬¼ìêµ­) ë° ì‹¬ì¥ì§ˆí™˜ ì£¼ì˜" },
      { name: "ì¹´ë¦¬ìŠ¤ë§ˆ í—ˆìŠ¤í‚¤", img: "https://i.imgur.com/M6L7cRk.png", 
        traits: [5, 9, 10], tag: "#ì—‰ëš±í•¨",
        desc: "ììœ ë¡œìš´ ì˜í˜¼ì˜ ì†Œìœ ì! í—ˆìŠ¤í‚¤ì˜ ì—‰ëš±í•¨ê³¼ ëŒ€í™”í•˜ëŠ” ë“¯í•œ í•˜ìš¸ë§ì´ ë‹¹ì‹ ì˜ ì‚¶ì„ ì§€ë£¨í•˜ì§€ ì•Šê²Œ í•´ì¤„ ê±°ì˜ˆìš”.",
        health: "ì•ˆêµ¬ ì§ˆí™˜ ë° ê³ ê´€ì ˆ ì£¼ì˜" },
      { name: "ì²œì¬ê²¬ ë³´ë”ì½œë¦¬", img: "https://i.imgur.com/l4Z2e1G.png", 
        traits: [7, 8, 10], tag: "#ì›Œì»¤í™€ë¦­",
        desc: "ì„±ì·¨ìš•ì´ ê°•í•˜ê³  í™œë™ì ì¸ ë‹¹ì‹ . ë³´ë”ì½œë¦¬ì™€ í•¨ê»˜ í”„ë¦¬ìŠ¤ë¹„ë‚˜ ì–´ì§ˆë¦¬í‹°ë¥¼ ë„ì „í•´ë³´ì„¸ìš”. ìµœê³ ì˜ íŒŒíŠ¸ë„ˆê°€ ë  ê²ë‹ˆë‹¤.",
        health: "ê´€ì ˆ ê´€ë¦¬ ë° ê²°ë§‰ì—¼ ì£¼ì˜" },
      { name: "ëŠê¸‹í•œ ì‹œì¸„", img: "https://i.imgur.com/o5X1z7U.png", 
        traits: [5, 2, 2], tag: "#í‰í™”ì£¼ì˜ì",
        desc: "ì—¬ìœ ë¡­ê³  ëŠê¸‹í•œ ì„±ê²©ì˜ ë‹¹ì‹ . ì§–ì§€ ì•Šê³  ì–Œì „í•œ ì‹œì¸„ì™€ í•¨ê»˜ ì¡°ìš©í•˜ê³  í‰í™”ë¡œìš´ íë§ ë¼ì´í”„ë¥¼ ì¦ê²¨ë³´ì„¸ìš”.",
        health: "ì•ˆêµ¬ ê±´ì¡°ì¦ ë° í˜¸í¡ê¸° ì§ˆí™˜ ì£¼ì˜" },
      { name: "ê°œì„±íŒŒ í”„ë Œì¹˜ë¶ˆë…", img: "https://i.imgur.com/sY9X2bY.png", 
        traits: [6, 4, 4], tag: "#ë³¼ë§¤",
        desc: "ìœ ë‹ˆí¬í•œ ë§¤ë ¥ì„ ì•Œì•„ë³´ëŠ” ë‹¹ì‹ . ë¬´ëšëší•´ ë³´ì´ì§€ë§Œ ì•Œê³  ë³´ë©´ ì •ì´ ë§ì€ ë¶ˆë…ê³¼ ê¹Šì€ ìš°ì •ì„ ìŒ“ì„ ìˆ˜ ìˆì–´ìš”.",
        health: "ë‹¨ë‘ì¢… í˜¸í¡ê¸° ì¦í›„êµ° ë° í”¼ë¶€ë³‘ ì£¼ì˜" }
    ];

    const questions = [
      { cat: "ğŸ  Reality", q: "í˜„ì¬ ê±°ì£¼í•˜ê³  ê³„ì‹  í™˜ê²½ì€?", a: "ì›ë£¸/ì˜¤í”¼ìŠ¤í…”/ì•„íŒŒíŠ¸ (ì‹¤ë‚´)", b: "ë§ˆë‹¹ì´ ìˆëŠ” ì£¼íƒ/ë„“ì€ ì‹¤ë‚´", impact: [0, -2, 0] },
      { cat: "â¤ï¸ Personality", q: "ì£¼ë§ ì•„ì¹¨, ì´ìƒì ì¸ íœ´ì‹ì€?", a: "ì¹¨ëŒ€ì™€ í•œ ëª¸ì´ ë˜ì–´ ë„·í”Œë¦­ìŠ¤", b: "ì¼ë‹¨ ë°–ìœ¼ë¡œ ë‚˜ê°€ì„œ ì—ë„ˆì§€ ë°œì‚°!", impact: [0, 0, 3] },
      { cat: "ğŸ§¹ Reality", q: "ê²€ì€ ì˜·ì— í•˜ì–€ í„¸ì´ ë¬»ëŠ”ë‹¤ë©´?", a: "ì ˆëŒ€ ì‹«ì–´! ëŒëŒì´ í•„ìˆ˜.", b: "ê°•ì•„ì§€ í„¸ì€ íŒ¨ì…˜ì´ì§€! ê´œì°®ë‹¤.", impact: [0, -1, 0] },
      { cat: "â¤ï¸ Personality", q: "ê°•ì•„ì§€ì™€ì˜ ê´€ê³„, ë‹¹ì‹ ì˜ ë¡œë§ì€?", a: "ë‚˜ë§Œ ë°”ë¼ë³´ëŠ” ê»Œë”±ì§€ (ì• êµ)", b: "ì„œë¡œ ì‚¬ìƒí™œ ì¡´ì¤‘í•˜ëŠ” ë£¸ë©”ì´íŠ¸ (ë…ë¦½)", impact: [-3, 0, 0] },
      { cat: "â° Reality", q: "í•˜ë£¨ ì‚°ì±…, ì–¼ë§ˆë‚˜ ê°€ëŠ¥í•˜ì‹ ê°€ìš”?", a: "30ë¶„ ë‚´ì™¸ (ë°”ì¨)", b: "1ì‹œê°„ ì´ìƒ (ì—¬ìœ ë¡œì›€)", impact: [0, 0, 2] },
      { cat: "â¤ï¸ Personality", q: "ë‚¯ì„  ì‚¬ëŒì´ ë§ì„ ê±¸ì–´ì˜¨ë‹¤ë©´?", a: "ë¶€ë‹´ìŠ¤ëŸ½ë‹¤.. ìë¦¬ë¥¼ í”¼í•œë‹¤.", b: "ì˜¤! ë°˜ê°€ì›Œìš”! ê¸ˆë°© ì¹œí•´ì§„ë‹¤.", impact: [2, 0, 0] },
      { cat: "ğŸ’° Reality", q: "ëŒ€í˜•ê²¬ì€ ë³‘ì›ë¹„/ì‹ë¹„ê°€ 3ë°°ì…ë‹ˆë‹¤.", a: "í˜„ì‹¤ì ìœ¼ë¡œ ë¶€ë‹´ëœë‹¤.", b: "ìƒê´€ì—†ë‹¤. ë“ ë“ í•œ ê²Œ ì¢‹ë‹¤.", impact: [0, -2, 0] }
    ];

    let qIdx = 0;
    let userScore = [5, 5, 3]; 
    let currentDog = null;

    function startTest() {
      document.querySelector('#screen-start').classList.remove('active');
      document.querySelector('#screen-question').classList.add('active');
      loadQuestion();
    }

    function loadQuestion() {
      const q = questions[qIdx];
      document.getElementById('q-idx').innerText = qIdx + 1;
      document.getElementById('q-cat').innerText = q.cat;
      document.getElementById('q-text').innerText = q.q;
      document.getElementById('ans-a').innerText = q.a;
      document.getElementById('ans-b').innerText = q.b;
      
      const percent = ((qIdx) / questions.length) * 100;
      document.getElementById('progress').style.width = percent + "%";
    }

    function nextQuestion(choice) {
      const impact = questions[qIdx].impact;
      if (choice === 0) {
        userScore[0] -= impact[0]; userScore[1] += impact[1]; userScore[2] -= impact[2];
      } else {
        userScore[0] += impact[0]; userScore[1] -= impact[1]; userScore[2] += impact[2];
      }
      qIdx++;
      if (qIdx < questions.length) loadQuestion();
      else showLoading();
    }

    function showLoading() {
      document.querySelector('#screen-question').classList.remove('active');
      document.querySelector('#screen-loading').classList.add('active');
      setTimeout(calculateResult, 2500);
    }

    function calculateResult() {
      let bestDog = dogs[0];
      let minDiff = 999;

      dogs.forEach(dog => {
        let diff = Math.abs(userScore[0] - dog.traits[0]) * 1.0 +
                   Math.abs(userScore[1] - dog.traits[1]) * 1.5 + 
                   Math.abs(userScore[2] - dog.traits[2]) * 1.2;
        if (diff < minDiff) { minDiff = diff; bestDog = dog; }
      });
      currentDog = bestDog;

      let matchScore = Math.floor((1 - (minDiff / 20)) * 100);
      if (matchScore > 98) matchScore = 98;
      if (matchScore < 70) matchScore = 70;

      // ê²°ê³¼ ë° ì´ë¯¸ì§€ ë Œë”ë§
      document.getElementById('res-name').innerText = bestDog.name;
      document.getElementById('res-img').src = bestDog.img; 
      document.getElementById('res-desc').innerText = bestDog.desc;
      document.getElementById('res-tag').innerText = bestDog.tag;
      document.getElementById('match-percent').innerText = matchScore; 
      
      document.getElementById('res-health').innerText = bestDog.health;
      document.getElementById('ins-btn-text').innerText = bestDog.name.split(' ').pop() + " ë³´í—˜ë£Œ 10ì´ˆ í™•ì¸ >";

      // ì°¨íŠ¸ ì• ë‹ˆë©”ì´ì…˜ (V9.2 ë²„ê·¸ ìˆ˜ì • ì ìš©)
      window.requestAnimationFrame(() => {
        document.getElementById('score-chem').style.width = (bestDog.traits[0] * 10) + "%";
        document.getElementById('score-env').style.width = (bestDog.traits[1] * 10) + "%";
        document.getElementById('score-energy').style.width = (bestDog.traits[2] * 10) + "%";
      });

      document.querySelector('#screen-loading').classList.remove('active');
      document.querySelector('#screen-result').classList.add('active');
      window.scrollTo(0, 0);
    }

    function shareFinalResult() {
        if (!currentDog) {
            alert("í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¥¼ ë¨¼ì € í™•ì¸í•´ì£¼ì„¸ìš”!");
            return;
        }

        const shareData = {
            title: `ë‚˜ì˜ ìš´ëª…ì  ë°˜ë ¤ê²¬ì€ [${currentDog.name}]!`,
            text: `ë‚´ ì„±ê²©ê³¼ í˜„ì‹¤ ì¡°ê±´ì— ë”± ë§ëŠ” ${currentDog.name}ì˜ ë¶„ì„ ê²°ê³¼ëŠ”? ì§€ê¸ˆ í™•ì¸í•´ë³´ì„¸ìš”!`,
            url: window.location.href,
        };

        if (navigator.share) {
            navigator.share(shareData).then(() => {
                console.log('Shared successfully');
            }).catch(console.error);
        } else {
            navigator.clipboard.writeText(shareData.title + '\n' + shareData.url).then(() => {
                alert("ğŸ”— ê²°ê³¼ ë§í¬ì™€ ë¬¸êµ¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! ì¹œêµ¬ì—ê²Œ ë¶™ì—¬ë„£ì–´ ê³µìœ í•˜ì„¸ìš”.");
            }).catch(() => {
                alert("ê³µìœ  ê¸°ëŠ¥ì´ ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì£¼ì†Œë¥¼ ì§ì ‘ ë³µì‚¬í•´ì£¼ì„¸ìš”.");
            });
        }
    }
  </script>
</body>
</html>
